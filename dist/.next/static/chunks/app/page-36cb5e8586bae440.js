(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1081:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var l=t(5155),n=t(2115);function c(e){let{connectionStatus:s}=e,[t,c]=(0,n.useState)(""),[a,i]=(0,n.useState)("");return(0,n.useEffect)(()=>{c(new Date().toLocaleString());let e=setInterval(()=>{i(new Date().toLocaleTimeString())},1e3);return()=>clearInterval(e)},[]),(0,l.jsx)("div",{className:"card bg-base-100 shadow-xl",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h1",{className:"card-title text-5xl font-bold mb-4",children:"Hello World!"}),(0,l.jsx)("p",{className:"text-2xl text-base-content/80 mb-4",children:"Welcome to BrightSign Display"}),(0,l.jsx)("div",{className:"divider"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-lg text-base-content/60",children:"Page Loaded"}),(0,l.jsx)("p",{className:"text-xl font-semibold",children:t})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-lg text-base-content/60",children:"Current Time"}),(0,l.jsx)("p",{className:"text-3xl font-bold font-mono",children:a||"..."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,l.jsx)("span",{className:"text-xl",children:"MQTT Status:"}),(()=>{switch(s){case"connected":return(0,l.jsx)("span",{className:"badge badge-success badge-lg text-lg px-4 py-3",children:"● Connected"});case"disconnected":return(0,l.jsx)("span",{className:"badge badge-error badge-lg text-lg px-4 py-3",children:"○ Disconnected"});case"connecting":return(0,l.jsx)("span",{className:"badge badge-warning badge-lg text-lg px-4 py-3",children:"◐ Connecting..."})}})()]})]})]})})}var a=t(1303),i=t(7358);let r={mqtt:{broker:i.env.NEXT_PUBLIC_MQTT_BROKER||"wss://test.mosquitto.org:8081",topic:i.env.NEXT_PUBLIC_MQTT_TOPIC||"hello-world-reference/test",clientId:"hello-world-client-".concat(Math.random().toString(16).substr(2,8))},api:{port:i.env.PORT||3e3}};class o{connect(){if(!this.client){this.setStatus("connecting");try{this.client=a.A.connect(r.mqtt.broker,{clientId:r.mqtt.clientId,clean:!0,reconnectPeriod:5e3}),this.client.on("connect",()=>{console.log("MQTT Connected to broker:",r.mqtt.broker),this.setStatus("connected"),this.subscribe(r.mqtt.topic)}),this.client.on("message",(e,s)=>{let t={topic:e,message:s.toString(),timestamp:new Date};console.log("MQTT Received message:",t),this.messageCallbacks.forEach(e=>e(t))}),this.client.on("error",e=>{console.error("MQTT Error:",e),this.setStatus("disconnected")}),this.client.on("disconnect",()=>{console.log("MQTT Disconnected"),this.setStatus("disconnected")}),this.client.on("offline",()=>{console.log("MQTT Offline"),this.setStatus("disconnected")})}catch(e){console.error("MQTT Connection failed:",e),this.setStatus("disconnected"),this.scheduleReconnect()}}}scheduleReconnect(){this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{console.log("Attempting to reconnect to MQTT broker..."),this.connect()},5e3)}setStatus(e){this.status=e,this.statusCallbacks.forEach(s=>s(e))}subscribe(e){this.client&&"connected"===this.status&&this.client.subscribe(e,s=>{s?console.error("MQTT Subscribe error:",s):console.log("MQTT Subscribed to topic:",e)})}publish(e,s){this.client&&"connected"===this.status?this.client.publish(e,s,t=>{t?console.error("MQTT Publish error:",t):console.log("MQTT Published message to topic:",e,s)}):console.warn("MQTT Client not connected, cannot publish message")}onMessage(e){return this.messageCallbacks.add(e),()=>{this.messageCallbacks.delete(e)}}onStatusChange(e){return this.statusCallbacks.add(e),e(this.status),()=>{this.statusCallbacks.delete(e)}}getStatus(){return this.status}disconnect(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.client&&(this.client.end(),this.client=null),this.setStatus("disconnected")}constructor(){this.client=null,this.status="disconnected",this.messageCallbacks=new Set,this.statusCallbacks=new Set,this.reconnectTimer=null,this.connect()}}let d=null;function h(){return d||(d=new o),d}function x(e){let{onStatusChange:s}=e,[t,c]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),[o,d]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!1),[b,u]=(0,n.useState)(""),g=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=h(),t=e.onMessage(e=>{c(s=>[...s.slice(-19),e]),j()}),l=e.onStatusChange(e=>{s(e),"connected"===e?p("Connected to MQTT broker!"):"disconnected"===e&&p("Disconnected from MQTT broker")});return()=>{t(),l()}},[s]);let j=()=>{var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth"})},p=e=>{u(e),m(!0),setTimeout(()=>m(!1),3e3)},N=async e=>{if(e.preventDefault(),!a.trim())return;d(!0);let s=h();try{s.publish(r.mqtt.topic,a),p("Message published successfully!"),i("")}catch(e){console.error("Failed to publish message:",e),p("Failed to publish message")}finally{d(!1)}};return(0,l.jsxs)("div",{className:"card bg-base-100 shadow-xl h-full",children:[(0,l.jsxs)("div",{className:"card-body flex flex-col h-full",children:[(0,l.jsx)("h2",{className:"card-title text-2xl mb-4",children:"MQTT Integration Panel"}),(0,l.jsxs)("form",{onSubmit:N,className:"form-control w-full",children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsxs)("span",{className:"label-text text-lg",children:["Topic: ",r.mqtt.topic]})}),(0,l.jsxs)("div",{className:"join w-full",children:[(0,l.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Enter message to publish...",className:"input input-bordered input-lg join-item flex-1 text-lg",disabled:o}),(0,l.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg join-item px-8 text-lg",disabled:o,children:o?(0,l.jsx)("span",{className:"loading loading-spinner loading-md"}):"Publish"})]})]}),(0,l.jsx)("div",{className:"divider text-lg",children:"Received Messages"}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsxs)("span",{className:"text-lg text-base-content/70",children:["Showing last ",t.length," message(s)"]}),t.length>0&&(0,l.jsx)("button",{onClick:()=>{c([])},className:"btn btn-ghost btn-sm",children:"Clear"})]}),(0,l.jsx)("div",{className:"bg-base-200 rounded-lg p-4 flex-1 overflow-y-auto",children:0===t.length?(0,l.jsxs)("div",{className:"text-center text-base-content/50 py-8",children:[(0,l.jsx)("p",{className:"text-xl",children:"No messages received yet."}),(0,l.jsx)("p",{className:"text-lg mt-2",children:"Waiting for messages on:"}),(0,l.jsx)("p",{className:"text-lg font-mono mt-1",children:r.mqtt.topic})]}):(0,l.jsxs)("div",{className:"space-y-2",children:[t.map((e,s)=>(0,l.jsx)("div",{className:"bg-base-100 p-3 rounded-lg border border-base-300",children:(0,l.jsx)("div",{className:"flex justify-between items-start",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"text-sm text-base-content/60",children:[e.timestamp.toLocaleTimeString()," - ",e.topic]}),(0,l.jsx)("div",{className:"font-mono text-lg mt-1",children:e.message})]})})},s)),(0,l.jsx)("div",{ref:g})]})}),(0,l.jsxs)("div",{className:"text-sm text-base-content/60 mt-auto pt-2",children:["Broker: ",r.mqtt.broker]})]}),x&&(0,l.jsx)("div",{className:"toast toast-top toast-end",children:(0,l.jsx)("div",{className:"alert alert-info",children:(0,l.jsx)("span",{children:b})})})]})}function m(){let[e,s]=(0,n.useState)("disconnected");return(0,l.jsx)("div",{className:"w-[1920px] h-[1080px] bg-base-200 overflow-hidden",children:(0,l.jsxs)("div",{className:"h-full p-8 flex flex-col",children:[(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)("h1",{className:"text-6xl font-bold mb-3",children:"Hello World Reference Application"}),(0,l.jsx)("p",{className:"text-2xl text-base-content/70",children:"React 18 • Next.js 15 • MQTT.js 5 • DaisyUI • Node.js 18"})]}),(0,l.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)(c,{connectionStatus:e}),(0,l.jsx)("div",{className:"card bg-base-100 shadow-xl flex-1",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h2",{className:"card-title text-2xl mb-4",children:"System Information"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-3",children:"Runtime Environment"}),(0,l.jsxs)("ul",{className:"text-lg space-y-2",children:[(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-success",children:"✓"})," Node.js 18.x"]}),(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-success",children:"✓"})," Chromium 120"]}),(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-success",children:"✓"})," 1920x1080 Display"]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-3",children:"Technology Stack"}),(0,l.jsxs)("ul",{className:"text-lg space-y-2",children:[(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-info",children:"◆"})," React 18"]}),(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-info",children:"◆"})," Next.js 15"]}),(0,l.jsxs)("li",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-info",children:"◆"})," MQTT WebSocket"]})]})]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(x,{onStatusChange:s})}),(0,l.jsx)("div",{className:"card bg-base-100 shadow-xl",children:(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h2",{className:"card-title text-2xl mb-4",children:"UI Components"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsx)("button",{className:"btn btn-primary btn-lg",children:"Primary"}),(0,l.jsx)("button",{className:"btn btn-secondary btn-lg",children:"Secondary"}),(0,l.jsx)("button",{className:"btn btn-accent btn-lg",children:"Accent"}),(0,l.jsx)("button",{className:"btn btn-ghost btn-lg",children:"Ghost"}),(0,l.jsx)("button",{className:"btn btn-outline btn-lg",children:"Outline"})]})]})})]})]})]})})}},9622:(e,s,t)=>{Promise.resolve().then(t.bind(t,1081))}},e=>{e.O(0,[349,441,255,358],()=>e(e.s=9622)),_N_E=e.O()}]);